(()=>{"use strict";var t={p:""};const e=t.p+"3101e102980aa335648b9657b1b3a7ab.svg";class o{constructor(t,e,o,n,r,a,i=!1){this.id=t,this.project=e,this.title=o,this.date=n,this.description=r,this.priority=a,this.check=i}}class n{constructor(t="default",e="#d01de0",o=[]){this.title=t,this.color=e,this.todoArray=o}}class r{constructor(t,e){const o=t.children[1];this.form=o,this.btn=e}static renderErrorValidation(){const t=document.getElementById("errors");return t.innerHTML="",t.innerHTML="To create a new to-do requires all filed",!1}static formValidation(t){return!!(t.title&&t.date&&t.description)||r.renderErrorValidation()}static validateProjectForm(t){return!t&&(r.renderErrorValidation(),!0)}static validateProjectUniquenes(t,e){return!document.getElementById("project-list").querySelector(`#${t}`)||(e.innerHTML=`The project ${t} already exists.`,!1)}static getProjectTitleAndColor(t){const e=document.getElementById("errors"),o=t.elements.projectTitle.value;if(e.innerHTML="",r.validateProjectForm(o))return!1;const a=t.elements.color.value;if(!r.validateProjectUniquenes(o,e))return!1;return new n(o,a)}static closeForm(t){t.classList.toggle("d-none")}static saveDataToTheLocalStorage(t,e){window.localStorage.setItem(t,JSON.stringify(e))}static getDataforTheLocalStorage(t){const e=JSON.parse(window.localStorage.getItem(t));return null===e||"null"===e?[]:e}static addNewProjectToForm(t){if(!t)return!1;const e=document.getElementById("project-form-container"),o=document.getElementById("project-list"),n=document.createElement("option");return n.value=t.title,n.selected="selected",n.id=t.title,n.innerHTML=t.title,o.append(n),r.saveDataToTheLocalStorage(`${t.title}Color`,{color:t.color}),r.closeForm(e),t}static getProjectFormInfo(){const t=document.getElementById("project-form"),e=document.getElementById("project-form-container");t.addEventListener("click",(o=>{if("btn-create-project"===o.target.id){const e=r.getProjectTitleAndColor(t);return r.addNewProjectToForm(e)}return"cancel-project-button"===o.target.id&&(r.closeForm(e),!1)}))}static lookExistenceProject(t){const e=r.getDataforTheLocalStorage("todoApp");if(e)for(const o of e)if(o.name===t.name)return o.todos.push(t.todos[0]),e;return e.push(t),e}static saveData(t){const e=((t=21)=>{let e="",o=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let n=63&o[t];e+=n<36?n.toString(36):n<62?(n-26).toString(36).toUpperCase():n<63?"_":"-"}return e})(10),n=t.elements.project.value,a=window.localStorage.getItem(`${n}Color`),i=t.elements.title.value,c=t.elements.date.value,d=t.elements.description.value,s=t.elements.priority.value;null===a&&r.saveDataToTheLocalStorage(`${n}Color`,{color:"#d01de0"});const l=r.getDataforTheLocalStorage(`${n}Color`),m=new o(e,n,i,c,d,s);if(!r.formValidation(m))return!1;const p={name:n,color:l.color,todos:[m]},u=r.lookExistenceProject(p);return r.saveDataToTheLocalStorage("todoApp",u),!0}static addOptionsFromStorage(){const t=document.getElementById("project-list"),e=r.getDataforTheLocalStorage("todoApp");e&&e.forEach((e=>{if("default"!==e.name){const o=document.createElement("option");o.value=e.name,o.id=e.name,o.innerHTML=e.name,t.append(o)}}))}getFromData(){r.addOptionsFromStorage(),r.getProjectFormInfo(),this.form.addEventListener("click",(t=>{if("create-button"===t.target.id){const t=document.getElementById("todo-form-container");r.saveData(this.form)&&r.closeForm(t)}if("create-project"===t.target.id){const t=document.getElementById("project-form-container");r.closeForm(t)}if("cancel-button"===t.target.id){const t=document.getElementById("todo-form-container");r.closeForm(t)}}))}}class a{constructor(){this.projectContainer=document.getElementById("projects"),this.todoContainer=document.getElementById("all-todos-container")}static saveDataToTheLocalStorage(t,e){window.localStorage.setItem(t,JSON.stringify(e))}static getDatafromTheLocalStorage(t){const e=JSON.parse(window.localStorage.getItem(t));return null===e||"null"===e?[]:e}static eventForClick(t,e,o,n){e.addEventListener("click",(e=>{if(e.target.id===`title-${t.id}`||e.target.id===`date-${t.id}`||e.target.id===`container-${t.id}`){document.getElementById(`details-${t.id}`).classList.toggle("d-none")}if(e.target.id===`delete-${t.id}`){const e=document.getElementById(`container-${t.id}`),r=document.getElementById(`details-${t.id}`),i=o.todos.indexOf(t);i>-1&&(o.todos.splice(i,1),e.remove(),r.remove(),a.saveDataToTheLocalStorage("todoApp",n),window.location.reload())}}))}static eventForFocusOut(t,e,o){t.addEventListener("focusout",(t=>{if(t.target.id===`description-${e.id}`&&(e.description=t.target.innerHTML,a.saveDataToTheLocalStorage("todoApp",o)),t.target.id===`editable-title-${e.id}`){document.getElementById(`title-${e.id}`).innerHTML=t.target.innerHTML,e.title=t.target.innerHTML,a.saveDataToTheLocalStorage("todoApp",o)}if(t.target.id===`priority-${e.id}`&&(e.priority=t.target.value,a.saveDataToTheLocalStorage("todoApp",o),window.location.reload()),t.target.id===`edit-date-${e.id}`){document.getElementById(`date-${e.id}`).innerHTML=`Due date: ${t.target.value}`,e.date=t.target.value,a.saveDataToTheLocalStorage("todoApp",o)}}))}static renderTodoCard(t){return`\n      <div class="todo d-flex" id="container-${t.id}">\n        <div class="checkbox-container"id="check-${t.id}">\n          <input type="checkbox" name="checkbox" id="checkbox" class="checkbox">\n          <label for="checkbox" class="checkbox-circle" id="${t.id}"></label>\n        </div>\n        <p class="todo-title" id="title-${t.id}">\n          ${t.title}\n        </p>\n        <div class="todo-date ml-auto gray-color" id="date-${t.id}"> Due date: ${t.date}</div>\n        <ion-icon name="trash-outline" class="delete-todo-icon" id="delete-${t.id}"></ion-icon>\n        <div class="priority-color-container priority-color-${t.priority}" id="color-${t.id}"></div>\n      </div>\n      <div class="todo-details d-none" id="details-${t.id}">\n        <div class="edit-container">\n          <p class="gray-color">Title</p>\n          <p contenteditable="true" id="editable-title-${t.id}" class="editable-content">${t.title}</p>\n        </div>\n        <div class="edit-container">\n          <p class="gray-color">Due date:</p>\n          <input type="date" value="${t.date}" id="edit-date-${t.id}" class="editable-content">\n        </div>\n        <div class="edit-container">\n          <p class="gray-color">Description: </p>\n          <p class="editable-content" id="description-${t.id}">\n              ${t.description}\n          </p>\n        </div>\n        <div class="edit-container">\n          <p class="gray-color">Priority: </p>\n          <select id="priority-${t.id}" class="editable-content">\n            <option value="1">1</option>\n            <option value="2">2</option>\n            <option value="3">3</option>\n          </select>\n        </div>\n      </div>\n    `}static construcCard(t,e,o,n){const r=document.createElement("div"),i=o.title.replace(/\s/g,"");r.id=`todo-${i}`,r.innerHTML=a.renderTodoCard(o),a.eventForClick(o,r,e,n),a.eventForFocusOut(r,o,n),t.append(r);const c=document.getElementById(`${o.id}`);document.getElementById(`description-${o.id}`).contentEditable=!0,c.style.border=`${e.color} 1px solid`}static renderProjectCard(t,e,o){const n=document.createElement("div");n.className="project",n.innerHTML=`\n    <p class="gray-color project-number">\n      <span id="project-number">${t.todos.length}</span>  Todos\n    </p>\n    <b>${t.name} </b>\n    <div class="project-color-default" id="${t.name}-color">\n    </div>`,e.append(n);document.getElementById(`${t.name}-color`).style.backgroundColor=t.color,n.addEventListener("click",(()=>{const e=document.getElementById("all-todos-container");e.innerHTML="",t.todos&&t.todos.forEach((n=>{a.construcCard(e,t,n,o)}))}))}renderProjects(){const t=a.getDatafromTheLocalStorage("todoApp");this.projectContainer.innerHTML="",t&&t.forEach((e=>{a.renderProjectCard(e,this.projectContainer,t)}))}renderAllTodos(){const t=a.getDatafromTheLocalStorage("todoApp");this.todoContainer.innerHTML="",t&&t.forEach((e=>{e.todos.forEach((o=>{a.construcCard(this.todoContainer,e,o,t)}))}))}}const i=document.getElementById("photo"),c=document.getElementById("menu-li"),d=document.getElementById("aside-container"),s=document.getElementById("add-todo-btn"),l=document.getElementById("todo-form-container"),m=new a;m.renderProjects(),m.renderAllTodos();new r(l,s).getFromData();const p=new class{constructor(t,o){this.name=t,this.photo=e,this.asideContainer=o}putLogo(t){t.src=this.photo}activateClose(){this.asideContainer.addEventListener("click",(t=>{"aside-container"!==t.target.id&&"arrow"!==t.target.id||this.asideContainer.classList.add("d-none")}))}}("kender",d);p.putLogo(i),p.activateClose();new class{constructor(t,e){this.element=t,this.openElement=e}activateOpenMemu(){this.element.addEventListener("click",(()=>{this.openElement.classList.toggle("d-none")}))}}(c,d).activateOpenMemu();(new class{constructor(){this.openBtn=document.getElementById("add-todo-btn"),this.formContainer=document.getElementById("todo-form-container")}activateButton(){this.openBtn.addEventListener("click",(()=>{this.formContainer.classList.toggle("d-none")}))}}).activateButton()})();